<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trail Maps | Uphill Ski Colorado</title>
    <meta
      name="description"
      content="Browse trail maps for 30 Colorado ski resorts with uphill access. View maps for Winter Park, Aspen, Vail, Breckenridge, Copper Mountain, and more."
    />
    <meta name="robots" content="index, follow" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="canonical" href="https://uphillskico.com/trailmaps.html" />
    <link rel="manifest" href="/site.webmanifest" />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://uphillskico.com/trailmaps.html" />
    <meta property="og:title" content="Trail Maps | Uphill Ski Colorado" />
    <meta
      property="og:description"
      content="Browse trail maps for 30 Colorado ski resorts with uphill access policies."
    />
    <meta property="og:locale" content="en_US" />
    <meta property="og:site_name" content="Uphill Ski Colorado" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Trail Maps | Uphill Ski Colorado" />
    <meta
      name="twitter:description"
      content="Browse trail maps for 30 Colorado ski resorts with uphill access policies."
    />

    <!-- Theme colors -->
    <meta
      name="theme-color"
      content="#f8fafc"
      media="(prefers-color-scheme: light)"
    />
    <meta
      name="theme-color"
      content="#0f172a"
      media="(prefers-color-scheme: dark)"
    />
    <style>
      :root {
        --bg-primary: #f8fafc;
        --bg-secondary: #ffffff;
        --text-primary: #0f172a;
        --text-secondary: #475569;
        --text-muted: #64748b;
        --border-color: #e2e8f0;
        --card-shadow:
          0 1px 3px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.04);
        --card-hover-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        --primary-color: #1d4ed8;
      }

      [data-theme="dark"] {
        --bg-primary: #0f172a;
        --bg-secondary: #1e293b;
        --text-primary: #f1f5f9;
        --text-secondary: #cbd5e1;
        --text-muted: #94a3b8;
        --border-color: #334155;
        --card-shadow:
          0 1px 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.2);
        --card-hover-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        --primary-color: #93c5fd;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, sans-serif;
        background-color: var(--bg-primary);
        color: var(--text-primary);
        min-height: 100vh;
        line-height: 1.5;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 1rem;
      }

      /* Header */
      .page-header {
        padding: 2rem 0 1.5rem;
        background: var(--bg-primary);
        margin-bottom: 0;
      }

      .header-content {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
      }

      .header-text {
        flex: 1;
      }

      .page-header h1 {
        color: var(--text-primary);
        margin-bottom: 0.5rem;
      }

      .display-1 {
        font-size: calc(1.625rem + 4.5vw);
        font-weight: 300;
        line-height: 1.2;
      }

      .page-header p {
        font-size: 0.875rem;
        color: var(--text-muted);
        margin-bottom: 0;
      }

      .back-link {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--primary-color);
        text-decoration: none;
        font-size: 0.875rem;
        margin-bottom: 0.5rem;
      }

      .back-link:hover {
        text-decoration: underline;
      }

      /* Theme toggle */
      .theme-toggle {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: 0.5rem;
        padding: 0.5rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        flex-shrink: 0;
        transition: all 0.2s ease;
      }

      .theme-toggle:hover {
        border-color: var(--text-muted);
      }

      .theme-toggle svg {
        width: 20px;
        height: 20px;
        fill: var(--text-secondary);
      }

      .theme-toggle .sun-icon {
        display: none;
      }
      .theme-toggle .moon-icon {
        display: block;
      }
      [data-theme="dark"] .theme-toggle .sun-icon {
        display: block;
      }
      [data-theme="dark"] .theme-toggle .moon-icon {
        display: none;
      }

      /* Grid Layout */
      .trail-maps-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 1.5rem;
        padding: 1rem 0 3rem;
      }

      /* Card */
      .trail-map-card {
        background: var(--bg-secondary);
        border-radius: 0.75rem;
        overflow: hidden;
        border: 1px solid var(--border-color);
        box-shadow: var(--card-shadow);
        transition:
          transform 0.2s ease,
          box-shadow 0.2s ease;
        text-decoration: none;
        color: inherit;
        display: flex;
        flex-direction: column;
      }

      .trail-map-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--card-hover-shadow);
      }

      .trail-map-thumbnail {
        aspect-ratio: 4 / 3;
        overflow: hidden;
        background: var(--bg-primary);
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
      }

      .trail-map-thumbnail img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
      }

      .trail-map-card:hover .trail-map-thumbnail img {
        transform: scale(1.05);
      }

      /* Card info */
      .trail-map-info {
        padding: 1rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 0.5rem;
      }

      .trail-map-name {
        font-weight: 600;
        font-size: 0.9375rem;
        color: var(--text-primary);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .trail-map-type {
        font-size: 0.6875rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        padding: 0.25rem 0.5rem;
        border-radius: 4px;
        font-weight: 600;
        flex-shrink: 0;
      }

      .type-webp,
      .type-avif {
        background: #dcfce7;
        color: #166534;
      }

      [data-theme="dark"] .type-webp,
      [data-theme="dark"] .type-avif {
        background: #064e3b;
        color: #6ee7b7;
      }

      /* Rank badges */
      .rank-badge {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-width: 2rem;
        height: 2rem;
        padding: 0 0.375rem;
        border-radius: 0.375rem;
        font-size: 0.8125rem;
        font-weight: 700;
        flex-shrink: 0;
      }

      .rank-gold {
        background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
        color: #78350f;
        box-shadow: 0 2px 4px rgba(245, 158, 11, 0.3);
      }

      .rank-silver {
        background: linear-gradient(135deg, #e2e8f0 0%, #94a3b8 100%);
        color: #1e293b;
        box-shadow: 0 2px 4px rgba(148, 163, 184, 0.3);
      }

      .rank-bronze {
        background: linear-gradient(135deg, #fdba74 0%, #ea580c 100%);
        color: #7c2d12;
        box-shadow: 0 2px 4px rgba(234, 88, 12, 0.3);
      }

      .rank-base {
        background: var(--bg-primary);
        color: var(--text-muted);
        border: 1px solid var(--border-color);
      }

      .trail-map-label {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        min-width: 0;
      }

      /* Search */
      .search-container {
        max-width: 400px;
        margin: 0 auto 1.5rem;
      }

      .autocomplete-container {
        position: relative;
      }

      .form-control {
        width: 100%;
        padding: 0.75rem 1rem;
        font-size: 1rem;
        border: 1px solid var(--border-color);
        border-radius: 0.5rem;
        background: var(--bg-secondary);
        color: var(--text-primary);
        outline: none;
        transition:
          border-color 0.15s ease,
          box-shadow 0.15s ease;
      }

      .form-control:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(29, 78, 216, 0.1);
      }

      [data-theme="dark"] .form-control:focus {
        box-shadow: 0 0 0 3px rgba(147, 197, 253, 0.1);
      }

      .form-control::placeholder {
        color: var(--text-muted);
      }

      .autocomplete-list {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        z-index: 1000;
        display: none;
        margin: 0.25rem 0 0;
        padding: 0.25rem 0;
        list-style: none;
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: 0.5rem;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        max-height: 280px;
        overflow-y: auto;
      }

      .autocomplete-list.show {
        display: block;
      }

      .autocomplete-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.625rem 0.875rem;
        cursor: pointer;
        transition: background-color 0.1s ease;
      }

      .autocomplete-item:hover,
      .autocomplete-item.active {
        background-color: var(--bg-primary);
      }

      .autocomplete-item-rank {
        font-size: 0.75rem;
        font-weight: 700;
        color: var(--text-muted);
        min-width: 1.75rem;
      }

      .autocomplete-item-name {
        flex: 1;
        font-weight: 500;
        color: var(--text-primary);
      }

      .autocomplete-item-name mark {
        background: #fef08a;
        color: inherit;
        padding: 0 2px;
        border-radius: 2px;
      }

      [data-theme="dark"] .autocomplete-item-name mark {
        background: #854d0e;
      }

      .autocomplete-item-type {
        font-size: 0.75rem;
        color: var(--text-muted);
        text-transform: uppercase;
      }

      .autocomplete-empty {
        padding: 0.75rem;
        text-align: center;
        color: var(--text-muted);
        font-size: 0.875rem;
      }

      /* Skip link for accessibility */
      .skip-link {
        position: absolute;
        top: -40px;
        left: 0;
        background: var(--primary-color);
        color: #fff;
        padding: 8px 16px;
        z-index: 1100;
        text-decoration: none;
        border-radius: 0 0 4px 0;
        font-size: 0.875rem;
      }

      .skip-link:focus {
        top: 0;
      }

      .results-count {
        text-align: center;
        color: var(--text-muted);
        font-size: 0.875rem;
        margin-bottom: 1rem;
      }

      /* Footer */
      .page-footer {
        padding: 1.5rem 0;
        text-align: center;
        color: var(--text-muted);
        font-size: 0.8125rem;
        border-top: 1px solid var(--border-color);
      }

      /* Responsive */
      @media (min-width: 640px) {
        .trail-maps-grid {
          grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
          gap: 2rem;
        }
      }

      @media (min-width: 768px) {
        .page-header {
          padding: 2.5rem 0 1.5rem;
        }

        .display-1 {
          font-size: 1.75rem;
        }

        .page-header p {
          font-size: 0.9375rem;
        }
      }

      @media (min-width: 1024px) {
        .display-1 {
          font-size: 2rem;
        }

        .trail-maps-grid {
          grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        }
      }
    </style>
  </head>
  <body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <header class="page-header" role="banner">
      <div class="container">
        <a href="/" class="back-link">
          <svg
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="currentColor"
            aria-hidden="true"
          >
            <path
              fill-rule="evenodd"
              d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"
            />
          </svg>
          Back to Uphill Policies
        </a>
        <div class="header-content">
          <div class="header-text">
            <h1 class="display-1">Trail Maps</h1>
            <p>Browse trail maps for Colorado ski resorts</p>
          </div>
          <button
            class="theme-toggle"
            id="themeToggle"
            aria-label="Toggle dark mode"
            title="Switch between light and dark mode"
          >
            <svg
              class="moon-icon"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
              aria-hidden="true"
            >
              <path
                d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"
              />
            </svg>
            <svg
              class="sun-icon"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
              aria-hidden="true"
            >
              <path
                d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z"
              />
            </svg>
          </button>
        </div>
      </div>
    </header>

    <main id="main-content" class="container">
      <div class="search-container">
        <div class="autocomplete-container">
          <input
            type="search"
            id="searchInput"
            class="form-control"
            placeholder="Search trail maps..."
            autocomplete="off"
            role="combobox"
            aria-expanded="false"
            aria-controls="autocomplete-list"
            aria-autocomplete="list"
          />
          <ul
            id="autocomplete-list"
            class="autocomplete-list"
            role="listbox"
            aria-label="Trail map suggestions"
          ></ul>
        </div>
      </div>
      <p class="results-count" id="resultsCount"></p>
      <div class="trail-maps-grid" id="trailMapsGrid">
        <noscript>
          <p style="text-align: center; padding: 2rem">
            JavaScript is required to view trail maps. Please enable JavaScript
            in your browser.
          </p>
        </noscript>
      </div>
    </main>

    <footer class="page-footer">
      <div class="container">
        <p>
          Trail maps are property of their respective ski resorts. Always verify
          current trail conditions before your uphill adventure.
        </p>
      </div>
    </footer>

    <script>
      // Theme management
      (function () {
        const savedTheme = localStorage.getItem("theme");
        const prefersDark = window.matchMedia(
          "(prefers-color-scheme: dark)",
        ).matches;
        if (savedTheme) {
          document.documentElement.setAttribute("data-theme", savedTheme);
        } else if (prefersDark) {
          document.documentElement.setAttribute("data-theme", "dark");
        }
      })();

      document
        .getElementById("themeToggle")
        .addEventListener("click", function () {
          const currentTheme =
            document.documentElement.getAttribute("data-theme");
          const newTheme = currentTheme === "dark" ? "light" : "dark";
          document.documentElement.setAttribute("data-theme", newTheme);
          localStorage.setItem("theme", newTheme);
        });

      // Trail maps data - sorted by uphill policy rank
      const trailMaps = [
        { name: "Winter Park", file: "WinterPark.webp", type: "webp", rank: 1 },
        {
          name: "Howelsen Hill",
          file: "HowelsenHill.webp",
          type: "webp",
          rank: 2,
        },
        {
          name: "Aspen Snowmass",
          file: "AspenSnowmass.webp",
          type: "webp",
          rank: 3,
        },
        {
          name: "Aspen Buttermilk",
          file: "AspenButtermilk.webp",
          type: "webp",
          rank: 3,
        },
        {
          name: "Aspen Highlands",
          file: "AspenHighlands.webp",
          type: "webp",
          rank: 3,
        },
        {
          name: "Aspen Mountain",
          file: "AspenMountain.webp",
          type: "webp",
          rank: 3,
        },
        { name: "Copper Mountain", file: "Copper.webp", type: "webp", rank: 4 },
        {
          name: "Ski Cooper (Front)",
          file: "Cooper-1.webp",
          type: "webp",
          rank: 5,
        },
        {
          name: "Ski Cooper (Back)",
          file: "Cooper-2.webp",
          type: "webp",
          rank: 5,
        },
        {
          name: "Monarch (Frontside)",
          file: "MonarchFrontside.webp",
          type: "webp",
          rank: 6,
        },
        {
          name: "Monarch (No Name Basin)",
          file: "MonarchNoNameBasin.webp",
          type: "webp",
          rank: 6,
        },
        { name: "Telluride", file: "Telluride.webp", type: "webp", rank: 7 },
        { name: "Powderhorn", file: "Powderhorn.webp", type: "webp", rank: 8 },
        { name: "Sunlight", file: "Sunlight.webp", type: "webp", rank: 9 },
        {
          name: "Arapahoe Basin",
          file: "A-Basin.webp",
          type: "webp",
          rank: 10,
        },
        { name: "Eldora", file: "Eldora.webp", type: "webp", rank: 11 },
        {
          name: "Granby Ranch",
          file: "GranbyRanch.webp",
          type: "webp",
          rank: 12,
        },
        {
          name: "Echo Mountain",
          file: "EchoMountain.webp",
          type: "webp",
          rank: 13,
        },
        { name: "Wolf Creek", file: "WolfCreek.webp", type: "webp", rank: 14 },
        { name: "Loveland", file: "Loveland.webp", type: "webp", rank: 15 },
        { name: "Vail", file: "Vail.avif", type: "avif", rank: 16 },
        {
          name: "Beaver Creek",
          file: "BeaverCreek.avif",
          type: "avif",
          rank: 17,
        },
        { name: "Breckenridge", file: "Breck.webp", type: "webp", rank: 18 },
        { name: "Keystone", file: "Keystone.webp", type: "webp", rank: 19 },
        {
          name: "Crested Butte",
          file: "CrestedButte.avif",
          type: "avif",
          rank: 20,
        },
        { name: "Steamboat", file: "Steamboat.webp", type: "webp", rank: 21 },
        {
          name: "Kendall Mountain",
          file: "Kendall.webp",
          type: "webp",
          rank: 22,
        },
        { name: "Silverton", file: "Silverton.webp", type: "webp", rank: 23 },
        { name: "Purgatory", file: "Purgatory.webp", type: "webp", rank: 24 },
        {
          name: "Mirkwood Basin",
          file: "MirkwoodBasin.webp",
          type: "webp",
          rank: null,
        },
      ];

      // Get rank badge HTML
      function getRankBadge(rank) {
        if (!rank) return "";
        const tier =
          rank <= 5
            ? "gold"
            : rank <= 10
              ? "silver"
              : rank <= 15
                ? "bronze"
                : "base";
        return `<span class="rank-badge rank-${tier}" title="Uphill Policy Rank #${rank}">#${rank}</span>`;
      }

      // DOM elements
      const grid = document.getElementById("trailMapsGrid");
      const searchInput = document.getElementById("searchInput");
      const autocompleteList = document.getElementById("autocomplete-list");
      const resultsCount = document.getElementById("resultsCount");
      let activeIndex = -1;

      // Render trail maps
      function renderTrailMaps(maps) {
        grid.innerHTML = maps
          .map(
            (map) => `
          <a href="/trailmaps/${map.file}" target="_blank" rel="noopener noreferrer" class="trail-map-card">
            <div class="trail-map-thumbnail">
              <img src="/trailmaps/${map.file}" alt="${map.name} trail map" loading="lazy" decoding="async">
            </div>
            <div class="trail-map-info">
              <div class="trail-map-label">
                ${getRankBadge(map.rank)}
                <span class="trail-map-name">${map.name}</span>
              </div>
              <span class="trail-map-type type-${map.type}">${map.type.toUpperCase()}</span>
            </div>
          </a>
        `,
          )
          .join("");

        resultsCount.textContent =
          maps.length === trailMaps.length
            ? `${maps.length} trail maps`
            : `${maps.length} of ${trailMaps.length} trail maps`;
      }

      // Filter trail maps
      function filterTrailMaps() {
        const query = searchInput.value.toLowerCase();
        const filtered = trailMaps.filter((map) =>
          map.name.toLowerCase().includes(query),
        );
        renderTrailMaps(filtered);
      }

      // Highlight matching text
      function highlightMatch(text, query) {
        if (!query) return text;
        const regex = new RegExp(
          `(${query.replace(/[.*+?^${}()|[\]\\]/g, "\\$&")})`,
          "gi",
        );
        return text.replace(regex, "<mark>$1</mark>");
      }

      // Show autocomplete suggestions
      function showAutocomplete(query) {
        if (!query || query.length < 1) {
          hideAutocomplete();
          return;
        }

        const matches = trailMaps
          .filter((m) => m.name.toLowerCase().includes(query.toLowerCase()))
          .slice(0, 8);

        if (matches.length === 0) {
          autocompleteList.innerHTML = `<li class="autocomplete-empty">No trail maps found</li>`;
          autocompleteList.classList.add("show");
          searchInput.setAttribute("aria-expanded", "true");
          return;
        }

        autocompleteList.innerHTML = matches
          .map(
            (map, idx) => `
            <li class="autocomplete-item" role="option" id="autocomplete-option-${idx}" data-index="${idx}" data-name="${map.name}">
              <span class="autocomplete-item-rank">${map.rank ? "#" + map.rank : "-"}</span>
              <span class="autocomplete-item-name">${highlightMatch(map.name, query)}</span>
              <span class="autocomplete-item-type">${map.type}</span>
            </li>
          `,
          )
          .join("");

        autocompleteList.classList.add("show");
        searchInput.setAttribute("aria-expanded", "true");
        activeIndex = -1;
      }

      function hideAutocomplete() {
        autocompleteList.classList.remove("show");
        searchInput.setAttribute("aria-expanded", "false");
        searchInput.removeAttribute("aria-activedescendant");
        activeIndex = -1;
      }

      function selectItem(name) {
        searchInput.value = name;
        hideAutocomplete();
        filterTrailMaps();
      }

      function updateActiveItem(newIndex) {
        const items = autocompleteList.querySelectorAll(".autocomplete-item");
        if (items.length === 0) return;

        items.forEach((item) => item.classList.remove("active"));

        if (newIndex >= 0 && newIndex < items.length) {
          activeIndex = newIndex;
          items[activeIndex].classList.add("active");
          items[activeIndex].scrollIntoView({ block: "nearest" });
          searchInput.setAttribute(
            "aria-activedescendant",
            `autocomplete-option-${newIndex}`,
          );
        } else {
          activeIndex = -1;
          searchInput.removeAttribute("aria-activedescendant");
        }
      }

      // Event listeners
      searchInput.addEventListener("input", (e) => {
        showAutocomplete(e.target.value);
        filterTrailMaps();
      });

      searchInput.addEventListener("keydown", (e) => {
        const items = autocompleteList.querySelectorAll(".autocomplete-item");

        switch (e.key) {
          case "ArrowDown":
            e.preventDefault();
            if (!autocompleteList.classList.contains("show")) {
              showAutocomplete(searchInput.value);
            } else {
              updateActiveItem(
                activeIndex < items.length - 1 ? activeIndex + 1 : 0,
              );
            }
            break;
          case "ArrowUp":
            e.preventDefault();
            updateActiveItem(
              activeIndex > 0 ? activeIndex - 1 : items.length - 1,
            );
            break;
          case "Enter":
            if (activeIndex >= 0 && items[activeIndex]) {
              e.preventDefault();
              selectItem(items[activeIndex].dataset.name);
            }
            break;
          case "Escape":
            hideAutocomplete();
            break;
        }
      });

      searchInput.addEventListener("focus", () => {
        if (searchInput.value) {
          showAutocomplete(searchInput.value);
        }
      });

      autocompleteList.addEventListener("click", (e) => {
        const item = e.target.closest(".autocomplete-item");
        if (item) {
          selectItem(item.dataset.name);
        }
      });

      document.addEventListener("click", (e) => {
        if (!e.target.closest(".autocomplete-container")) {
          hideAutocomplete();
        }
      });

      // Initial render
      renderTrailMaps(trailMaps);
    </script>
  </body>
</html>
